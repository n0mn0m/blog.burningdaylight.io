
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Alexander Hagerman">
      
      
        <link rel="canonical" href="https://burningdaylight.io/blog/page/3/">
      
      
        <link rel="prev" href="../../../me/">
      
      
        <link rel="next" href="../../archive/2025/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../icons/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Index - burningdaylight</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/styles.css">
    
      <link rel="stylesheet" href="../../../css/portfolio.css">
    
      <link rel="stylesheet" href="../../../css/resume.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="hsl(195,-80%,-42%)" data-md-color-accent="hsl(284,-22%,-36%)">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://burningdaylight.io" title="burningdaylight" class="md-header__button md-logo" aria-label="burningdaylight" data-md-component="logo">
      
  <img src="../../../icons/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            burningdaylight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="hsl(195,-80%,-42%)" data-md-color-accent="hsl(284,-22%,-36%)"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="hsl(284,-22%,-36%)" data-md-color-accent="hsl(195,-80%,-42%)"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://burningdaylight.io" title="burningdaylight" class="md-nav__button md-logo" aria-label="burningdaylight" data-md-component="logo">
      
  <img src="../../../icons/favicon.png" alt="logo">

    </a>
    burningdaylight
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../me/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Me
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Index
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../../" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Index
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#self-hosting" class="md-nav__link">
    <span class="md-ellipsis">
      Self Hosting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roll-your-own-git-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Roll your own git hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-resharper-global-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started with Resharper Global Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupby-fun-with-sql-and-python" class="md-nav__link">
    <span class="md-ellipsis">
      GroupBy Fun with SQL and Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-speed-bumps" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Speed Bumps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Wrapping Up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-version-01" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Version 0.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-model-training" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Model Training
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-synthetic-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Synthetic Generation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-display" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Display
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2025/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../archive/2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Lists
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Lists
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lists/books/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Books
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../lists/podcast/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Podcast
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/portfolio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Portfolio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/resume/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resume
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#self-hosting" class="md-nav__link">
    <span class="md-ellipsis">
      Self Hosting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roll-your-own-git-hook" class="md-nav__link">
    <span class="md-ellipsis">
      Roll your own git hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started-with-resharper-global-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Getting started with Resharper Global Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#groupby-fun-with-sql-and-python" class="md-nav__link">
    <span class="md-ellipsis">
      GroupBy Fun with SQL and Python
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-speed-bumps" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Speed Bumps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-wrapping-up" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Wrapping Up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-version-01" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Version 0.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-model-training" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Model Training
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-synthetic-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Synthetic Generation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#train-all-the-things-display" class="md-nav__link">
    <span class="md-ellipsis">
      Train All the Things — Display
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="index">Index<a class="headerlink" href="#index" title="Permanent link">&para;</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-21 00:00:00+00:00">November 21, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="self-hosting"><a class="toclink" href="../../2020/11/21/self-hosting/">Self Hosting</a></h2>
<p>Over the last few years I built up a sprawling list of dependencies for my home project and blog workflow. Earlier this
year I decided it was time to cut down on that list and host my service dependencies locally where I could. While it
took me a while I reached a point where I no longer tweak the setup week to week and decided it was time to write up the
process.</p>
<p>A quick list of the tools I used for orchestration:</p>
<ul>
<li>shell</li>
<li>DNS</li>
<li>Traefik2</li>
<li>docker/docker-compose</li>
<li>alpine linux</li>
</ul>
<h4 id="ddns"><a class="toclink" href="../../2020/11/21/self-hosting/#ddns">(D)DNS</a></h4>
<p>The first thing I needed to do was make my services easy to reach local and remote. Since this is all running behind my
home router that also means that my IP can change from time to time. To handle this I made use of Gandi’s DNS API, and
setup a <a href="https://github.com/georgr/erx-gandi-nat-ddns">shell script</a> to run with cron on my router to keep my DNS
records up to date. With DNS ready I moved on to Traefik.</p>
<h4 id="traefik"><a class="toclink" href="../../2020/11/21/self-hosting/#traefik">Traefik</a></h4>
<p><a href="https://traefik.io/">Traefik</a> is a really nice routing/proxy service that can inspect container labels and setup route
forwarding while handling certificate management, traffic metrics and more. The main callout (other than what you will
find in the <a href="https://doc.traefik.io/traefik/v2.3/">docs</a> ) is to keep an eye on what version you are using versus what
others used in examples, and that non http based traffic (for instance ssh) requires a little more setup. Beyond that
Traefik has been really nice to use and made adding/removing various services easy when coupled with docker.</p>
<h4 id="docker-compose"><a class="toclink" href="../../2020/11/21/self-hosting/#docker-compose">docker-compose</a></h4>
<p>While k8s is the current hot orchestration tool I wanted to keep things simple. I don’t have a need to cluster any of my
home tools, and while distributed systems are interesting they also require a lot of work. I left those at my day job
and use compose + <a href="https://github.com/n0mn0m/duplicity-helpers.git/">duplicity</a> for my home setup. This makes service
management easy, the labels allow traefik to detect and handle traffic management while
my <a href="http://duplicity.nongnu.org/">duplicty</a> ensures I won’t lose much work and can quickly restore my data and restart
any services in a few minutes on any box with docker.</p>
<h4 id="services"><a class="toclink" href="../../2020/11/21/self-hosting/#services">Services</a></h4>
<p>A quick list of the services I’m hosting:</p>
<ul>
<li>git</li>
<li>cgit</li>
<li>minio</li>
<li>teamcity</li>
<li>youtrack</li>
<li>rust home services API</li>
</ul>
<p>The service management can be found <a href="https://github.com/n0mn0m/arcade.git/tree/">here</a>.</p>
<h4 id="wrap-up"><a class="toclink" href="../../2020/11/21/self-hosting/#wrap-up">Wrap Up</a></h4>
<p>I’ve started to self host a few times in the past and backed away. This time I think it’s here to stay. With my current
setup I’m not worried about what happens when something crashes, certificate management is automated away and everything
just works. I’ve linked to my orchestration code above, but if you have any questions, or suggestions send
them <a href="mailto:contact@burningdaylight.io">my way</a>. If you are starting out on your own self hosted setup, good luck, have
fun it’s easier now than ever and I imagine it will continue to get better.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-10-18 00:00:00+00:00">October 18, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="roll-your-own-git-hook"><a class="toclink" href="../../2020/10/18/roll-your-own-git-hook/">Roll your own git hook</a></h2>
<p>As part of setting up <a href="https://burningdaylight.io/posts/resharper-global-tools/">tools</a> to run in our CI pipeline I also
setup a git pre-push<a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">hook</a> to run the same tools automatically
in the local context. Git provides a variety of hooks as documented in the scm book, and they can be used to reliably
automate different parts of your workflow.</p>
<p><em>In addition to the official docs </em><a href="https://githooks.com/"><em>this</em></a><em> page has a nice summary</em></p>
<h4 id="code"><a class="toclink" href="../../2020/10/18/roll-your-own-git-hook/#code">Code</a></h4>
<p>The pre-push hook I built for our project looks like:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="nv">PROJECTROOT</span><span class="o">=</span><span class="k">$(</span>git<span class="w"> </span>rev-parse<span class="w"> </span>--show-toplevel<span class="k">)</span><span class="w">  </span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running pre-push hook for</span><span class="si">${</span><span class="nv">PROJECTROOT</span><span class="si">}</span><span class="s2">&quot;</span>
dotnet<span class="w"> </span>restore<span class="w"> </span><span class="nv">$PROJECTROOTecho</span><span class="w"> </span><span class="s2">&quot;Running resharper formatter&quot;</span><span class="w">  </span>
dotnet<span class="w"> </span>jb<span class="w"> </span>cleanupcode<span class="w"> </span>--verbosity<span class="o">=</span>ERROR<span class="w"> </span>--config<span class="o">=</span><span class="nv">$PROJECTROOT</span>/.config/cleanup<span class="w"> </span>--settings<span class="o">=</span><span class="nv">$PROJECTROOT</span>/.editorconfig<span class="w"> </span>--no-buildin-settings<span class="w"> </span><span class="nv">$PROJECTROOT</span>/AMS.sln
<span class="nv">formatted</span><span class="o">=</span><span class="k">$(</span>git<span class="w"> </span>status<span class="w"> </span>--porcelain<span class="o">=</span>v1<span class="w"> </span><span class="m">2</span>&gt;/dev/null<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span><span class="w">  </span>

<span class="nv">$formatted</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running dotnet resharper inspector&quot;</span><span class="w">  </span>
dotnet<span class="w"> </span>jb<span class="w"> </span>inspectcode<span class="w"> </span>--verbosity<span class="o">=</span>ERROR<span class="w"> </span>AMS.sln<span class="w"> </span>-p<span class="o">=</span><span class="nv">$PROJECTROOT</span>/.editorconfig<span class="w"> </span>-o<span class="o">=</span><span class="nv">$PROJECTROOT</span>/reports/resharperInspect.xmlpwsh<span class="w"> </span><span class="nv">$PROJECTROOT</span>/tools/CheckResharperInspection.ps1<span class="w">  </span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="w">  </span>
<span class="k">then</span><span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running resharper dupe finder&quot;</span><span class="w">  </span>
<span class="k">else</span><span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Inspector Errors Found&quot;</span><span class="w">  </span>
<span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="nv">$?</span><span class="w">  </span>
<span class="k">fi</span>

dotnet<span class="w"> </span>jb<span class="w"> </span>dupfinder<span class="w"> </span>--verbosity<span class="o">=</span>ERROR<span class="w"> </span>AMS.sln<span class="w"> </span>-o<span class="o">=</span><span class="nv">$PROJECTROOT</span>/reports/resharperDupFinder.xmlpwsh<span class="w"> </span><span class="nv">$PROJECTROOT</span>/tools/CheckDupeFinder.ps1<span class="w">  </span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="w">  </span>
<span class="k">then</span><span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Running dotnet test&quot;</span><span class="w">  </span>
<span class="k">else</span><span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Dupe Errors Found&quot;</span><span class="w">  </span>
<span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="nv">$?</span><span class="w">  </span>
<span class="k">fi</span>

dotnet<span class="w"> </span>cake<span class="w"> </span>--target<span class="o">=</span>docker-bg<span class="w">  </span>
dotnet<span class="w"> </span>cake<span class="w"> </span>--target<span class="o">=</span>dotnet-test<span class="w">  </span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span><span class="w">  </span>
<span class="k">then</span><span class="w">  </span>
<span class="w"> </span>dotnet<span class="w"> </span>cake<span class="w"> </span>--target<span class="o">=</span>docker-down<span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Go go go!&quot;</span><span class="w">  </span>
<span class="k">else</span><span class="w">  </span>
<span class="w"> </span>dotnet<span class="w"> </span>cake<span class="w"> </span>--target<span class="o">=</span>docker-down<span class="w">  </span>
<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Test failed&quot;</span><span class="w">  </span>
<span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span><span class="w">  </span>
<span class="k">fi</span>
</code></pre></div>
<p>The first thing that should stand out is that this is just a shell script. Git hooks are just that, making it easy to
use shell, python, powershell or other tools with your hook. Write the script, link it to .git/hooks.</p>
<h4 id="script-breakdown"><a class="toclink" href="../../2020/10/18/roll-your-own-git-hook/#script-breakdown">Script Breakdown</a></h4>
<p>In this script the first thing I do is find the root of our project. This makes it easy to reference paths in a manner
compatible with scripts and tools that are used throughout in other parts of our workflow.</p>
<h4 id="install"><a class="toclink" href="../../2020/10/18/roll-your-own-git-hook/#install">Install</a></h4>
<p>Since the hook above is just a shell script I like to keep it (and other hooks) in a tools subdirectory in the root
project directory. Because git expects hooks to be under .git/hooks we can make it executable with a symlink.</p>
<div class="highlight"><pre><span></span><code>ln<span class="w"> </span>-s<span class="w"> </span>-f<span class="w"> </span>../../tools/pre-push.sh<span class="w"> </span>.git/hooks/pre-pushWith<span class="w"> </span>this<span class="w"> </span><span class="k">in</span><span class="w"> </span>place<span class="w"> </span>we<span class="w"> </span>get<span class="w"> </span>feedback<span class="w"> </span>before<span class="w"> </span>each<span class="w"> </span>push<span class="w"> </span>so<span class="w"> </span>that<span class="w"> </span>we<span class="w"> </span>don’t<span class="w"> </span>have<span class="w"> </span>to<span class="w"> </span>correct<span class="w"> </span>linting<span class="w"> </span>issues<span class="w"> </span>later,<span class="w"> </span>and<span class="w"> </span>we<span class="w"> </span>have<span class="w"> </span>can<span class="w"> </span>be<span class="w"> </span>confident<span class="w"> </span>our<span class="w"> </span>commit<span class="o">(</span>s<span class="o">)</span><span class="w"> </span>will<span class="w"> </span>run<span class="w"> </span>through<span class="w"> </span>CI<span class="w"> </span>successfully.
</code></pre></div>
<h4 id="wrapping-up"><a class="toclink" href="../../2020/10/18/roll-your-own-git-hook/#wrapping-up">Wrapping Up</a></h4>
<p>While you may have heard of projects like <a href="https://pre-commit.com/">pre-commit</a>
or <a href="https://typicode.github.io/husky/#/">husky</a> rolling your own hook is relatively straight forward. While wrappers may
help with complex hook setups I personally like the low amount of indirection and abstraction that helps with debugging
when rolling your own.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-10-11 00:00:00+00:00">October 11, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="getting-started-with-resharper-global-tools"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/">Getting started with Resharper Global Tools</a></h2>
<p>For a while now I’ve been interested in build tools, CI and code quality. I think I got a taste for it as a member of
the PyMSSQL project and it has continued on from there. Recently I worked on the initial CI setup for a C# project. As
part of the setup I took the time to look at what lint and analysis tools we wanted to integrate into our project.</p>
<p>For C# some of the more common tools appear to be:</p>
<ul>
<li><a href="https://github.com/dotnet/roslyn-analyzers">Roslyn Analyzers</a></li>
<li><a href="http://www.sonarsource.com/">Sonarsource</a></li>
<li><a href="https://www.ndepend.com/">NDepend</a></li>
<li>
<p><a href="https://www.jetbrains.com/resharper/">Jetbrains Resharper</a>
  I won’t go into the full criteria for our choice of Resharper (I’ll update this post if I end up writing that up one
  day), instead I’ll summarize that Resharper provided:</p>
</li>
<li>
<p>easy cross platform setup</p>
</li>
<li>ide/editor and shell agnostic</li>
<li>works the same locally and in CI.</li>
<li>opinionated by default</li>
</ul>
<h4 id="resharper-command-line-tools"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#resharper-command-line-tools">Resharper Command Line Tools</a></h4>
<p>From the <a href="https://www.jetbrains.com/help/resharper/ReSharper_Command_Line_Tools.html">docs</a></p>
<p>ReSharper Command Line Tools is a set of free cross-platform standalone tools<br />
that help you integrate automatic code quality procedures into your CI, version<br />
control, or any other server.You can also run coverage analysis from the command line.The Command Line Tools package
includes the following tools:- InspectCode, which executes hundreds of ReSharper code inspections</p>
<ul>
<li>dupFinder, which detects duplicated code in the whole solution or narrower<br />
  scope</li>
<li>CleanupCode, which instantly eliminates code style violations and ensures a<br />
  uniform code base### Install</li>
</ul>
<p>To get started with Resharper tools (assuming you already have .NET Core installed) run</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd </span><span class="p">&lt;</span><span class="n">project</span><span class="p">&gt;</span>
<span class="n">dotnet</span> <span class="n">new</span> <span class="n">tool-manifest</span>
<span class="n">dotnet</span> <span class="n">tool</span> <span class="n">install</span> <span class="n">JetBrains</span><span class="p">.</span><span class="n">ReSharper</span><span class="p">.</span><span class="n">GlobalTools</span> <span class="p">-</span><span class="n">-version</span> <span class="n">2020</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">4Which</span> <span class="n">installs</span> <span class="n">the</span> <span class="no">[Resharper Global Tools]</span><span class="p">(</span><span class="n">https</span><span class="p">://</span><span class="n">www</span><span class="p">.</span><span class="n">nuget</span><span class="p">.</span><span class="n">org</span><span class="p">/</span><span class="n">packages</span><span class="p">/</span><span class="n">JetBrains</span><span class="p">.</span><span class="n">ReSharper</span><span class="p">.</span><span class="n">GlobalTools</span><span class="p">/</span><span class="n">2020</span><span class="p">.</span><span class="n">2</span><span class="p">.</span><span class="n">4</span><span class="p">)</span> <span class="n">at</span> <span class="n">the</span> <span class="n">project</span> <span class="n">level</span><span class="p">.</span> <span class="n">This</span> <span class="n">then</span> <span class="n">allows</span> <span class="n">CI</span> <span class="n">and</span> <span class="n">other</span> <span class="n">contributors</span> <span class="n">to</span> <span class="n">use</span> <span class="n">dotnet</span> <span class="n">tool</span> <span class="n">restore</span> <span class="k">in</span> <span class="n">the</span> <span class="n">future</span><span class="p">.</span>
</code></pre></div>
<h4 id="configuration"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#configuration">Configuration</a></h4>
<p>Out of the box inspect, format, and dupefinder all have default configurations that work well. That said each team has
their own needs and preferences you may want these tools to promote. While there are a few ways to configure these tools
I found using <a href="https://www.jetbrains.com/help/resharper/Using_EditorConfig.html">editorconfig</a> to be the most human
readable approach.</p>
<p>For additional details on the editorconfig format see the <a href="https://editorconfig.org/">docs</a> and this
property <a href="https://www.jetbrains.com/help/rider/EditorConfig_Index.html">index</a>.</p>
<h4 id="running"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#running">Running</a></h4>
<p>Running the tools from a shell is relatively easy:</p>
<div class="highlight"><pre><span></span><code><span class="n">jb</span> <span class="n">cleanupcode</span> <span class="p">-</span><span class="n">-verbosity</span><span class="p">=</span><span class="n">ERROR</span> <span class="p">-</span><span class="n">-config</span><span class="p">=./.</span><span class="n">config</span><span class="p">/</span><span class="n">cleanup</span> <span class="p">-</span><span class="n">-settings</span><span class="p">=./.</span><span class="n">editorconfig</span> <span class="p">-</span><span class="n">-no-buildin-settings</span> <span class="p">./</span><span class="n">Project</span><span class="p">.</span><span class="n">sln</span>
<span class="n">jb</span> <span class="n">inspectcode</span> <span class="p">-</span><span class="n">-verbosity</span><span class="p">=</span><span class="n">ERROR</span> <span class="n">Project</span><span class="p">.</span><span class="n">sln</span> <span class="n">-o</span><span class="p">=./</span><span class="n">reports</span><span class="p">/</span><span class="n">resharperInspect</span><span class="p">.</span><span class="n">xml</span>
<span class="n">jb</span> <span class="n">dupfinder</span> <span class="p">-</span><span class="n">-verbosity</span><span class="p">=</span><span class="n">ERROR</span> <span class="n">Project</span><span class="p">..</span><span class="n">sln</span> <span class="n">-o</span><span class="p">=./</span><span class="n">reports</span><span class="p">/</span><span class="n">resharperDupFinder</span><span class="p">.</span><span class="n">xmlOne</span> <span class="n">thing</span> <span class="n">to</span> <span class="n">note</span> <span class="n">is</span> <span class="n">that</span> <span class="n">by</span> <span class="k">default</span> <span class="n">the</span> <span class="n">autoformatting</span> <span class="n">will</span> <span class="n">attempt</span> <span class="n">to</span> <span class="n">enforce</span> <span class="n">line</span> <span class="n">endings</span><span class="p">.</span> <span class="k">If</span> <span class="n">you</span> <span class="n">have</span> <span class="n">a</span> <span class="n">team</span> <span class="n">working</span> <span class="n">across</span> <span class="n">multiple</span> <span class="n">platforms</span> <span class="n">and</span> <span class="n">using</span> <span class="n">git</span> <span class="n">to</span> <span class="n">automatically</span> <span class="n">handle</span> <span class="n">line</span> <span class="n">endings</span> <span class="n">these</span> <span class="n">can</span> <span class="n">come</span> <span class="n">into</span> <span class="n">conflict</span><span class="p">.</span> <span class="n">It</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">up</span> <span class="n">to</span> <span class="n">you</span> <span class="n">and</span> <span class="n">your</span> <span class="n">team</span> <span class="n">to</span> <span class="n">decide</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">to</span> <span class="n">handle</span> <span class="n">this</span> <span class="n">by</span> <span class="n">tweaking</span> <span class="n">git</span> <span class="n">behavior</span><span class="p">,</span><span class="n">editorconfig</span> <span class="n">or</span> <span class="n">another</span> <span class="n">method</span><span class="p">.</span>
</code></pre></div>
<h4 id="ci"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#ci">CI</a></h4>
<p><em>If your using Team City
see </em><a href="https://www.jetbrains.com/help/resharper/Detect_code_issues_in_a_build_using_ReSharper_and_TeamCity.html"><em>this</em></a><em>
doc for details.</em></p>
<p>With everything running in our shell locally we can also set things up to run in our CI pipeline. Running the tools is
easy as long as your CI platform has a shell like task/step/operator:</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span><span class="w">  </span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">dotnet tool restore</span><span class="w">  </span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">jb cleanupcode --verbosity=ERROR --config=./.config/cleanup --settings=./.editorconfig --no-buildin-settings ./Project.sln</span><span class="w">  </span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">jb inspectcode --verbosity=ERROR Project.sln -o=./reports/resharperInspect.xml</span><span class="w">  </span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">jb dupfinder --verbosity=ERROR Project..sln -o=./reports/resharperDupFinder.xml</span><span class="w">  </span>
<span class="w">  </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Resharper&#39;</span>
</code></pre></div>
<p>Of course you will probably break these up for easier maintenance and reporting.</p>
<p>Running the tools is easy. The trick is detecting when these tools find an issue. I’ll share what I did in case it’s
helpful, but long term it would be great if Jetbrains had the tools exit with documented status codes for different
issues. As it stands the tools only exit with an error if the tool fails, not when issues are reported.</p>
<h4 id="cleanupcode"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#cleanupcode">CleanupCode</a></h4>
<p>Since CleanupCode will format our file rewriting it on disk we can use git to detect the change.</p>
<div class="highlight"><pre><span></span><code><span class="n">formatted</span><span class="p">=$(</span><span class="n">git</span> <span class="n">status</span> <span class="p">-</span><span class="n">-porcelain</span><span class="p">=</span><span class="n">v1</span> <span class="n">2</span><span class="p">&gt;/</span><span class="n">dev</span><span class="p">/</span><span class="n">null</span> <span class="p">|</span> <span class="n">wc</span> <span class="n">-l</span><span class="p">)</span>  
<span class="n">exit</span> <span class="nv">$formatted</span>
</code></pre></div>
<h4 id="dupfinder"><a class="toclink" href="../../2020/10/11/getting-started-with-resharper-global-tools/#dupfinder">dupFinder</a></h4>
<p>dupFinder outputs an XML file highlighting any issues found. Powershell's built in XML support makes it easy enough to
query this file and see if any issues exist.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$Result</span> <span class="p">=</span> <span class="nb">Select-Xml</span> <span class="n">-Path</span> <span class="p">$(</span><span class="n">System</span><span class="p">.</span><span class="n">DefaultWorkingDirectory</span><span class="p">)/</span><span class="n">reports</span><span class="p">/</span><span class="n">resharperDupFinder</span><span class="p">.</span><span class="n">xml</span> <span class="n">-XPath</span> <span class="s2">&quot;/DuplicatesReport/Duplicates/*&quot;</span>
<span class="k">If</span> <span class="p">(</span><span class="nv">$Result</span> <span class="o">-eq</span> <span class="nv">$null</span><span class="p">)</span> <span class="p">{</span> <span class="no">[Environment]</span><span class="p">::</span><span class="n">Exit</span><span class="p">(</span><span class="n">0</span><span class="p">)</span> <span class="p">}</span> <span class="k">Else</span> <span class="p">{</span> <span class="no">[Environment]</span><span class="p">::</span><span class="n">Exit</span><span class="p">(</span><span class="n">1</span><span class="p">)</span> <span class="p">}</span><span class="c">### InspectCode</span>
</code></pre></div>
<p>Similar to dupFinder InspectCode documents issues with an XML file, and once again we can use Powershell to detect if
there are any issues to fix.</p>
<div class="highlight"><pre><span></span><code><span class="nv">$Result</span> <span class="p">=</span> <span class="nb">Select-Xml</span> <span class="n">-Path</span> <span class="p">$(</span><span class="n">System</span><span class="p">.</span><span class="n">DefaultWorkingDirectory</span><span class="p">)/</span><span class="n">reports</span><span class="p">/</span><span class="n">resharperInspect</span><span class="p">.</span><span class="n">xml</span> <span class="n">-XPath</span> <span class="s2">&quot;/Report/Issues/Project/*&quot;</span>
<span class="k">If</span> <span class="p">(</span><span class="nv">$Result</span> <span class="o">-eq</span> <span class="nv">$null</span><span class="p">)</span> <span class="p">{</span> <span class="no">[Environment]</span><span class="p">::</span><span class="n">Exit</span><span class="p">(</span><span class="n">0</span><span class="p">)</span> <span class="p">}</span> <span class="k">Else</span> <span class="p">{</span> <span class="no">[Environment]</span><span class="p">::</span><span class="n">Exit</span><span class="p">(</span><span class="n">1</span><span class="p">)</span> <span class="p">}</span><span class="n">And</span> <span class="n">since</span> <span class="n">dupFinder</span> <span class="n">and</span> <span class="n">InspectCode</span> <span class="n">output</span> <span class="n">XML</span> <span class="n">it</span> <span class="n">can</span> <span class="n">be</span> <span class="n">useful</span> <span class="n">to</span> <span class="n">save</span> <span class="n">these</span> <span class="n">as</span> <span class="n">CI</span> <span class="n">artifacts</span> <span class="k">for</span> <span class="n">review</span><span class="p">.</span> <span class="k">In</span> <span class="n">Azure</span> <span class="n">Pipelines</span> <span class="n">this</span> <span class="n">looks</span> <span class="n">like</span><span class="p">:</span>
</code></pre></div>
<p><code>yaml
- task: PublishPipelineArtifact@1  
  inputs:  
  targetPath: '$(System.DefaultWorkingDirectory)/reports/'  
  artifactName: 'measurements'  
  condition: always()  
  displayName: 'Save ReSharper Results For Review.'### Wrapping Up</code></p>
<p>We’ve been using the ReSharper tools for a few months now and I have to say they provided what I was looking for in the
beginning. The tools have been easy to use, help us maintain our code and haven’t boxed us in or required a lot of extra
time on configuration and unseen gotchas. The only criticism I have is cold start time is pretty slow for cleanupcode,
and the return exit codes could be better. Both of these would also help with CI, and our git hook setup. Otherwise I
think these will continue to serve us well and let us focus on our project delivery.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-05-28 00:00:00+00:00">May 28, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="groupby-fun-with-sql-and-python"><a class="toclink" href="../../2020/05/28/groupby-fun-with-sql-and-python/">GroupBy Fun with SQL and Python</a></h2>
<p>A few months ago I had the opportunity to collaborate with some Data Scientist porting PySpark queries to raw Python.
One of the primary areas of concern was aggregation statements. These were seen as functionality that would be
particularly troublesome to write in Python. As an example I was provided a Spark SQL query similar to this:</p>
<div class="highlight"><pre><span></span><code><span class="n">text</span> <span class="o">=</span> <span class="n">ocrdata</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s1">&#39;lvl&#39;</span><span class="p">)</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">length</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span><span class="n">col</span><span class="s1">&#39;txt&#39;</span><span class="p">)))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">txtcols</span><span class="p">)</span> \  
 <span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s1">&#39;ctxt&#39;</span> <span class="n">casestd</span><span class="p">(</span><span class="n">col</span><span class="p">(</span><span class="s1">&#39;txt&#39;</span><span class="p">)))</span> \  
 <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;txt&#39;</span><span class="p">)</span> \  
 <span class="o">.</span><span class="n">withColumn</span><span class="p">(</span><span class="s1">&#39;tkpos&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">struct</span><span class="p">(</span><span class="s1">&#39;wrdnm&#39;</span><span class="p">,</span> <span class="s1">&#39;ctxt&#39;</span><span class="p">))</span> \  
 <span class="o">.</span><span class="n">groupBy</span><span class="p">(</span><span class="n">lncols</span><span class="p">)</span> \  
 <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">sortarray</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">collectlist</span><span class="p">(</span><span class="s1">&#39;tkpos&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s1">&#39;txtarray&#39;</span><span class="p">))</span> \  
 <span class="o">.</span><span class="n">withColum</span><span class="p">(</span><span class="s1">&#39;txtln&#39;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">concatws</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">col</span><span class="p">(</span><span class="s1">&#39;txtarray.casestd&#39;</span><span class="p">)))</span> \  
 <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;txtarray&#39;</span><span class="p">)</span><span class="n">This</span> <span class="n">query</span> <span class="n">was</span> <span class="n">transforming</span> <span class="n">token</span> <span class="n">data</span> <span class="n">generated</span> <span class="n">by</span> <span class="n">Tesseract</span> <span class="n">into</span> <span class="n">lines</span><span class="o">.</span> <span class="n">Beyond</span> <span class="n">the</span> <span class="n">aggregation</span> <span class="n">operation</span> <span class="n">there</span> <span class="n">was</span> <span class="n">also</span> <span class="n">some</span> <span class="n">concern</span> <span class="n">that</span> <span class="n">the</span> <span class="n">operation</span> <span class="n">may</span> <span class="n">be</span> <span class="n">ran</span> <span class="n">against</span> <span class="n">quite</span> <span class="n">large</span> <span class="n">datasets</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">how</span> <span class="n">much</span> <span class="p">[</span><span class="n">Tesseract</span><span class="p">](</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tesseract</span><span class="o">-</span><span class="n">ocr</span><span class="p">)</span> <span class="n">output</span> <span class="n">was</span> <span class="n">being</span> <span class="n">manipulated</span> <span class="n">at</span> <span class="n">once</span><span class="o">.</span>
</code></pre></div>
<p>Outside of the raw functionality I was asked if the data could be structured to provide an interface with named columns
in a style similar to SQL rather than having to reference positional data.</p>
<p>All of this seemed fairly straightforward. Provided with some sample data I pulled in the UDF that was already in Python
and set out to apply the transformations first illustrating how we could interact with the data in a way similar to SQL
with pipeline transformations and named references.</p>
<h4 id="porting-transformations"><a class="toclink" href="../../2020/05/28/groupby-fun-with-sql-and-python/#porting-transformations">Porting Transformations</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">itertoolsfrom</span> <span class="n">csv</span> <span class="kn">import</span><span class="w"> </span><span class="nn">DictReader</span>  
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">namedtupledef</span> <span class="n">casestd</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>  
 <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>  
 <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>  
 <span class="k">elif</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>  
 <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>  
 <span class="k">else</span><span class="p">:</span>  
 <span class="k">return</span> <span class="n">xwith</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sampledata/export.csv&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sample</span><span class="p">:</span>  
 <span class="n">reader</span> <span class="o">=</span> <span class="n">DictReader</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>  
 <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">]</span><span class="n">a</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;level&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>  
<span class="n">filtered</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>  
<span class="n">fixed</span> <span class="o">=</span> <span class="p">({</span><span class="o">**</span><span class="n">row</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">:</span><span class="n">casestd</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">])}</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">filtered</span><span class="p">)</span><span class="n">tkpos</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s2">&quot;tkpos&quot;</span><span class="p">,</span> <span class="s2">&quot;wordnum, text&quot;</span><span class="p">)</span>  
<span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">&quot;tkpos&quot;</span><span class="p">:</span><span class="n">tkpos</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;wrdnum&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">])})</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fixed</span><span class="p">)</span><span class="n">To</span> <span class="n">start</span> <span class="n">I</span> <span class="n">read</span> <span class="n">the</span> <span class="n">data</span> <span class="ow">in</span> <span class="k">with</span> <span class="n">a</span> <span class="p">[</span><span class="n">DictReader</span><span class="p">](</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="mf">3.7</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">csv</span><span class="o">.</span><span class="n">html</span><span class="c1">#csv.DictReader) which allowed me to reference values by name like “level” and “text”. I then applied similar data transformations making use of [filter](https://docs.python.org/3.7/library/functions.html#filter), [comprehensions](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions), and [unpacking](https://docs.python.org/3/reference/expressions.html) to try and keep a style similar to some PySpark operations.</span>
</code></pre></div>
<p>Finally I put the rest of the transformations into a <a href="https://www.python.org/dev/peps/pep-0289/">generator expression</a>
containing a dict of <a href="https://docs.python.org/3.7/library/collections.html#collections.namedtuple">namedtuple</a>values so
that later operations could continue working on named values in a manner similar to SQL columns.</p>
<h4 id="groupby"><a class="toclink" href="../../2020/05/28/groupby-fun-with-sql-and-python/#groupby">GROUPBY</a></h4>
<p>With the transformation and named values part out of the way I moved onto the GROUPBY aggregations. Thinking about
GROUPBY the goal is to apply an aggregation function to a unique value. That unique value can be represented multiple
ways, but I wanted to show the idea behind what was happening to help with future port efforts. So on my first pass I
wrote:</p>
<div class="highlight"><pre><span></span><code><span class="n">grouped</span> <span class="o">=</span> <span class="p">[]</span>  
<span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span><span class="o">*</span><span class="c1"># Order is known because it represents data generated by tesseract  </span>
<span class="o">*</span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">fixed</span><span class="p">:</span>  
 <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;pagenum&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;blocknum&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;parnum&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;linenum&quot;</span><span class="p">])</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>  
 <span class="k">continue</span> <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="n">line</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">fixed</span><span class="p">:</span>  
 <span class="n">rkey</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;pagenum&#39;, r[&quot;</span><span class="n">blocknum</span><span class="s2">&quot;], r[&quot;</span><span class="n">parnum</span><span class="s2">&quot;], r[&quot;</span><span class="n">linenum</span><span class="s2">&quot;])  </span>
 <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="n">rkey</span><span class="p">:</span>  
 <span class="n">line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s2">&quot;ctxt&quot;</span><span class="p">])</span> <span class="n">txt</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>  
 <span class="n">cleantxt</span> <span class="o">=</span> <span class="n">txt</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">cleantxt</span><span class="p">:</span>  
 <span class="n">grouped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>  
 <span class="p">{</span>  
 <span class="s2">&quot;pagenum&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;pagenum&quot;</span><span class="p">],</span>  
 <span class="s2">&quot;blocknum&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;blocknum&quot;</span><span class="p">],</span>  
 <span class="s2">&quot;parnum&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;parnum&quot;</span><span class="p">],</span>  
 <span class="s2">&quot;lnnum&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;linenum&quot;</span><span class="p">],</span>  
 <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">cleantxt</span><span class="p">,</span>  
 <span class="p">}</span>  
 <span class="p">)</span>
</code></pre></div>
<p>Keeping in mind that this was to conceptualize what could be happening behind the scenes for the GROUPBYand AGG
operation here we loop over our rows generating a hash from some values. Once we have this hash we check if we have seen
it before by referencing a set. If this is a new value we find all values of the hash in our transformed data, append
the tokens, handle empty tokens and finally add the data to our final dataset. At the end we have lines of text (instead
of individual tokens) that can be referenced by page, block, paragraph and line number.</p>
<p>While this works it’s horribly inefficient. It stands out that we are reiterating our transformed data every time we
find a new key. But the goal for this wasn’t to be efficient. It was to show the ideas expressed in SQL with Python.
Specifically it was highlighting how to express a GROUPBY/AGG operation manually using hashes of values and tracking
what we have and have not seen providing a final dataset that was the same as the output of the SQL statement.</p>
<h4 id="itertools"><a class="toclink" href="../../2020/05/28/groupby-fun-with-sql-and-python/#itertools">itertools</a></h4>
<p>Continuing on from that point one of my favorite Python modules is itertools. If you haven't spent much time with it I
highly recommend taking some of your existing code and looking over it while scanning the itertools docs. I've used
islice, chain and ziplongest innumberable times. Because of that I knew there was a handy groupby function stowed in
there too:</p>
<p>Make an iterator that returns consecutive keys and groups from the iterable.<br />
The key is a function computing a key value for each element. If not specified<br />
or is None, key defaults to an identity function and returns the element<br />
unchanged.Generally, the iterable needs to already be sorted on the same key function.Replacing the block above:</p>
<div class="highlight"><pre><span></span><code><span class="n">final</span> <span class="o">=</span> <span class="p">[]</span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span>  
 <span class="n">req</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;pagenum&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;blocknum&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;parnum&quot;</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;linenum&quot;</span><span class="p">])</span>  
<span class="p">):</span>  
 <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">group</span><span class="p">])</span>  
 <span class="n">final</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;pagenum&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  
 <span class="s2">&quot;blocknum&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  
 <span class="s2">&quot;parnum&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>  
 <span class="s2">&quot;linenum&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>  
 <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">line</span><span class="p">,</span>  
 <span class="p">})</span><span class="n">And</span> <span class="k">with</span> <span class="n">that</span> <span class="n">change</span> <span class="n">we</span> <span class="n">have</span> <span class="n">a</span> <span class="n">clean</span><span class="p">,</span> <span class="n">faster</span> <span class="n">implementation</span><span class="o">.</span> <span class="n">Additionally</span> <span class="n">since</span> <span class="n">this</span> <span class="n">was</span> <span class="n">a</span> <span class="n">port</span> <span class="n">of</span> <span class="n">Spark</span> <span class="n">SQL</span> <span class="k">if</span> <span class="n">the</span> <span class="n">data</span> <span class="n">was</span> <span class="n">to</span> <span class="n">get</span> <span class="n">truly</span> <span class="n">large</span> <span class="n">it</span> <span class="n">wouldn</span><span class="err">’</span><span class="n">t</span> <span class="n">be</span> <span class="n">much</span> <span class="n">work</span> <span class="n">to</span> <span class="n">start</span> <span class="n">iterating</span> <span class="n">through</span> <span class="nb">all</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pipeline</span> <span class="ow">in</span> <span class="n">batches</span> <span class="n">since</span> <span class="n">we</span> <span class="n">can</span> <span class="n">use</span> <span class="n">generators</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">way</span> <span class="n">through</span><span class="o">.</span>
</code></pre></div>
<h4 id="conclusion"><a class="toclink" href="../../2020/05/28/groupby-fun-with-sql-and-python/#conclusion">Conclusion</a></h4>
<p>So what was the point of sharing that here? Nothing specific. It was a fun exercise at the time, and it made me pause to
consider how I would express GROUPBY on my own. The exercise also helped introduce some of my colleagues to the filter
expression and in turn map and reduce. Using those they were able to express a lot of their pipeline concepts without a
lot of the iteration structures they were used to having abstracted away. If you find yourself doing a lot of pipelining
I recommend checking out itertools and functools. Both are built into the Python stdlib and provide a lot of helpful
functionality.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-30 00:00:00+00:00">March 30, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-speed-bumps"><a class="toclink" href="../../2020/03/30/train-all-the-things--speed-bumps/">Train All the Things — Speed Bumps</a></h2>
<p>As part of getting started on my project a couple months back I took a look at what boards were supported
by<a href="https://www.tensorflow.org/lite/microcontrollers#supported_platforms">Tensorflow lite</a> . Seeing an esp board I went
that route since I’ve heard alot from the maker/hacker community and thought it would be a good opportunity to learn
more. Additionally it’s been quite a while since I had a project that was primarily C/C++ so that was exciting. Like any
good project I ran into multiple unexpected bumps, bugs and issues. Some were minor, others were frustrating. I'm
capturing some of those here for anybody else that may be starting down the path of using Tensorflow Lite and an ESP32
board.</p>
<h4 id="tensorflow-speed-bumps"><a class="toclink" href="../../2020/03/30/train-all-the-things--speed-bumps/#tensorflow-speed-bumps">Tensorflow speed bumps</a></h4>
<p>Getting started with TF Lite is easy enough, but something I noticed as I continued to work on the project is just how
little things are designed specific to the platform. Instead the examples are setup with Arduino as a default, and then
work is done to make that run on X target. In the case of the ESP-EYE this looks like packing everything into an Arduino
compatible loop, and handling that in a single FreeRTOS task. I get the reason for this, but it's also a bit of a
headache later on as it feels like an anti pattern when addin in new task and event handlers.</p>
<p>Another bump you are likely to notice is that the TF Lite examples rely on functionality present in the TF 1.xbranch for
training, but require TF &gt;= 2.2 for micro libs. Not the end of the world, but it means your going to manage multiple
environts. If managing this using venv/virtualenv keep in mind you're going to need the esp-idf requirements in the 2.x
environment, or just install in both as you may find yourself switching back and forth. In addition to python lib
versions the examples note esp-idf 4.0, but you will want to use &gt;
=4.0with <a href="https://github.com/espressif/esp-idf/pull/4251">this</a> commit or you will run into compiler failures. I ended
up using 4.1 eventually, but something to note.</p>
<p>Finally interaction with the model feels flaky. It’s an example so this kind of makes sense, but I found that while the
word detected was pretty accurate the newcommand and some of the attributes of the keyword being provided by the model
weren't matching my expectation/use. I ended up using the score value and monitoring the model to setup the conditionals
for responding to commands in my application.</p>
<p>Overall the examples are great to have, and walking you through the train, test and load cycle is really helpful. The
main thing I wish I had known was that the TF Arduino path for ESP was pretty much the same as the ESP native path with
regards to utility and functionality just using the esp-idf toolchain.</p>
<h4 id="esp-speed-bumps"><a class="toclink" href="../../2020/03/30/train-all-the-things--speed-bumps/#esp-speed-bumps">ESP speed bumps</a></h4>
<p>From the ESP side of things the core idf tooling is nice. I like how open it is and how much I can understand the
different pieces. This helped a few times when I ran into unexpected behavior. One thing to note is if you follow the
documented path of cloning esp-idf you will want to consider how you manage the release branch you use and when you
merge updates. Updates are not pushed into minor/bug fix branches instead they go into the release branch targeted on
merge.</p>
<p>Being new to the esp platform something I didn’t know when I got started was
that <a href="https://github.com/espressif/esp-idf/releases/tag/v4.0">esp-idf 4.x</a> released in February of 2020. Because of this
alot of the documentation and examples such as <a href="https://github.com/espressif/esp-who">ESP-WHO</a>
and <a href="https://github.com/espressif/esp-skainet">esp-skainet</a>are still based on 3.x which has a variety of differences and
changes in things like the TCP/network stack. Because of this checking the version used in various docs, examples etc
is (as usual) important. Since the TF examples reference version 4 that's where I started, but a lot of what's out there
is based on v3.</p>
<p>One other bump somebody may run into is struct initialization in a modern toolchain when calling the underlying esp C
libraries from C++. I spent some time digging around after transitioning the http request example into the TF C++
commandresponder code and the compiler told me I was missing uninitialized struct fields and their order made them
required.</p>
<p>The example code:</p>
<div class="highlight"><pre><span></span><code><span class="nx">esphttpclientconfigt</span><span class="w"> </span><span class="nx">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w"> </span><span class="p">.</span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;http://httpbin.org/get&quot;</span><span class="p">,</span><span class="w">  </span>
<span class="w"> </span><span class="p">.</span><span class="nx">eventhandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">httpeventhandler</span><span class="p">,</span><span class="w">  </span>
<span class="w"> </span><span class="p">.</span><span class="nx">userdata</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">localresponsebuffer</span><span class="p">,</span><span class="w">  </span>
<span class="p">};</span><span class="w">  </span>
<span class="nx">esphttpclienthandlet</span><span class="w"> </span><span class="nx">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">esphttpclientinit</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">config</span><span class="p">);</span><span class="w">  </span>
<span class="nx">esperrt</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">esphttpclientperform</span><span class="p">(</span><span class="nx">client</span><span class="p">);</span>
</code></pre></div>
<p>And how I had to do it in C++:</p>
<div class="highlight"><pre><span></span><code>esphttpclientconfigt* config = (esphttpclientconfigt*)calloc(sizeof(esphttpclientconfigt), 1);  
config-&gt;url = URL;  
config-&gt;certpem = burningdaylightiorootcertpemstart;  
config-&gt;eventhandler = httpeventhandler;esphttpclienthandlet client = esphttpclientinit(config);  
esphttpclientsetmethod(client, HTTPMETHODPUT);  
esperrt err = esphttpclientperform(client);
</code></pre></div>
<p>I had a similar issue with wifi and you can see the
solution <a href="https://github.com/n0mn0m/on-air/tree/main/voice-assistant/smalltalk/main/http/wifi.cc#L40">here</a>.</p>
<p>I really enjoyed my lite trip into idf. It's an interesting set of components and followed a workflow that I use and
appreciate. I wrote a couple aliases that somebody might find useful:</p>
<div class="highlight"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">adf</span><span class="o">=</span><span class="s2">&quot;export ADFPATH=</span><span class="nv">$HOME</span><span class="s2">/projects/esp-adf&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span>idf-refresh<span class="o">=</span><span class="s2">&quot;rm -rf </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf &amp;&amp; git clone --recursive git@github.com:espressif/esp-idf.git </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf &amp;&amp; </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf/install.sh&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">idf</span><span class="o">=</span><span class="s2">&quot;. </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf/export.sh&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">idf3</span><span class="o">=</span><span class="s2">&quot;pushd </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf &amp;&amp; git checkout release/v3.3 &amp;&amp; popd &amp;&amp; . </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf/export.sh&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">idf4x</span><span class="o">=</span><span class="s2">&quot;pushd </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf &amp;&amp; git checkout release/v4.0 &amp;&amp; popd &amp;&amp; . </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf/export.sh&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">idf4</span><span class="o">=</span><span class="s2">&quot;pushd </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf &amp;&amp; git checkout release/v4.1 &amp;&amp; popd &amp;&amp; . </span><span class="nv">$HOME</span><span class="s2">/projects/esp-idf/export.sh&quot;</span><span class="w">  </span>
<span class="nb">alias</span><span class="w"> </span>idf-test<span class="o">=</span><span class="s2">&quot;idf.py --port /dev/cu.SLABUSBtoUART flash monitor&quot;</span>And<span class="w"> </span>I<span class="w"> </span>look<span class="w"> </span>forward<span class="w"> </span>to<span class="w"> </span>writing<span class="w"> </span>more<span class="w"> </span>about<span class="w"> </span>esp<span class="w"> </span>as<span class="w"> </span>I<span class="w"> </span><span class="k">continue</span><span class="w"> </span>to<span class="w"> </span>use<span class="w"> </span>it<span class="w"> </span><span class="k">in</span><span class="w"> </span>new<span class="w"> </span>projects.
</code></pre></div>
<p>Approaching the end of this project it’s been a larger undertaking than I expected, but I’ve learned a lot. It’s
definitely generated a few new project ideas. The code, docs, images etc for the project can be
found <a href="https://github.com/n0mn0m/on-air">here</a> and I’ll be posting updates as I continue along
to <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a> and this blog. If you have any questions or ideas
reach <a href="mailto:n0mn0m@burningdaylight.io">out</a>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-30 00:00:00+00:00">March 30, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-wrapping-up"><a class="toclink" href="../../2020/03/30/train-all-the-things--wrapping-up/">Train All the Things — Wrapping Up</a></h2>
<p>And now I’m at v0.1 of the <a href="https://github.com/n0mn0m/on-air">on-air</a> project. I was able to achieve what I was hoping
to along the way. I learned more about model development, tensorflow and esp. While this version has some distinct
differences from what I outlined for the logic flow (keywords, VAD) it achieves the functional goal. The code, docs,
images etc for the project can be found in <a href="https://github.com/n0mn0m/on-air">this</a> repo, and the project details live
on <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a>. When I get back to this project and work on v1.x I'll make
updates available to each.</p>
<p><img alt="" src="../../../img/blog/012tf1MTuiXAahexs.gif" />
<img alt="" src="../../../img/blog/0lx6jwWNAwZhzb5vB.gif" /></p>
<p>A couple thoughts having worked through this in the evening for a couple months:</p>
<ul>
<li>I really should have outlined the states that the esp program was going to cycle through, and then mapped those into
  task on the FreeRTOS event loop. While the high level flow captures the external systems behavior the esp has the most
  moving parts at the applications level, and is where most of the state is influenced.</li>
<li>I want to spend some more time with C++ 14/17 understanding the gotchas of interfacing with C99. I ran into a few
  different struct init issues and found a few ways to solve them. I’m sure there is a good reason for different
  solutions, but it’s not something I’ve spent a lot of time dealing with so I need to learn.</li>
<li>While continuing to learn about esp-idf I want to look into some of the esp hal work too. I briefly explored esp-adf
  and skainet while working through on-air. Both focus on a couple boards but seems to have functionality that would be
  interesting for a variety of devices. Understanding the HAL and components better seems to be where to start.</li>
<li>Data, specifically structured data is going to continue to be a large barrier for open models and for anybody to be
  able to train a model for their own want/need. While sources like Kaggle, arvix, data.world and others have worked to
  help this there’s still a gulf between what I can get at home and what I can get at work. Additionally many open
  datasets are numeric or text datasets while video, audio and other sources are still lacking.</li>
<li>Document early, document often. Too many times I got so caught up in writing code, or just getting one more thing done
  that by the time I did that getting myself to do a thorough write up of issues I experienced, interesting findings, or
  even successful moments was difficult. I know that I put this off sometimes, and different parts of the project are
  not as well documented, or details have been lost to the days in between.</li>
<li>There’s a lot of fun stuff left to explore here I can see why I’ve heard a lot about esp and look forward to building
  more.</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-28 00:00:00+00:00">March 28, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-version-01"><a class="toclink" href="../../2020/03/28/train-all-the-things--version-01/">Train All the Things — Version 0.1</a></h2>
<p>My first commit to on-air shows March 3, 2020. I know that the weeks leading up to that commit I spent some time reading
through the TF Lite documentation, playing with Cloudflare Workers K/V and getting my first setup of esp-idf squared
away. After that it was off to the races. I outlined my original goal in
the <a href="https://burningdaylight.io/posts/train-all-the-things-planning/">planning</a> post. I didn't quite get to that goal.
The project currently doesn't have a VAD to handle the scenario where I forget to activate the display before starting a
call or hangout. Additionally I wasn't able to train a custom keyword as highlighted in
the <a href="https://burningdaylight.io/posts/train-all-the-things-custom-model/">custom model</a> post. I was however able to get
a functional implementation of the concept. I am able to hang the display up, and then in my lab with the ESP-EYEplugged
in I can use the wake word visual followed by on/off to toggle the display status.</p>
<p><img alt="" src="../../../img/blog/0C-2uoh95x7lHo8Fk.gif" /></p>
<p><img alt="" src="../../../img/blog/0ygsQSW9CnHHNsacv.gif" /></p>
<p>While it’s not quite what I had planned it’s a foundation. I’ve got a lot more tools and knowledge under my belt. Round
2 will probably involved <a href="https://github.com/espressif/esp-skainet">Skainet</a> just due to the limitations in voice data
that’s readily available. Keep an eye out for a couple more post highlighting some bumps along the way and summary of
lessons learned.</p>
<p>The code, docs, images etc for the project can be found <a href="https://github.com/n0mn0m/on-air">here</a> and I’ll be posting any
further updates to <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a>. For anybody that might be interested in
building this the instructions below provide a brief outline. Updated versions will be hosted in
the <a href="https://github.com/n0mn0m/on-air/tree/main/docs">repo</a>. If you have any questions or ideas
reach <a href="mailto:n0mn0m@burningdaylight.io">out</a>.</p>
<p><strong>Required Hardware:</strong></p>
<ol>
<li><a href="https://www.espressif.com/en/products/hardware/esp-eye/overview">ESP-EYE</a></li>
<li>Optional <a href="https://www.thingiverse.com/thing:3586384">ESP-EYE case</a></li>
<li><a href="https://www.adafruit.com/product/4116">PyPortal</a></li>
<li>Optional <a href="https://www.thingiverse.com/thing:3469747">PyPortal case</a></li>
<li>Two 3.3v usb to outler adapters and two usb to usb mini cables</li>
</ol>
<p>OR</p>
<ol>
<li>Two 3.3v micro usb wall outlet chargers</li>
</ol>
<p>Build Steps:</p>
<ol>
<li>Clone the <a href="https://github.com/n0mn0m/on-air">on-air</a> repo.</li>
</ol>
<p>Cloudflare Worker:</p>
<ol>
<li>Setup <a href="https://www.cloudflare.com/dns/">Cloudflare</a> DNS records for your domain and endpoint, or setup a
   new <a href="https://www.cloudflare.com/products/registrar/">domain</a> with Cloudflare if you don’t have one to resolve the
   endpoint.</li>
<li>Setup a <a href="https://workers.cloudflare.com/">Cloudflare workers</a> account with worker K/V.</li>
<li>Setup the <a href="https://developers.cloudflare.com/workers/tooling/wrangler">Wrangler</a> CLI tool.</li>
<li>cd into the on-air/sighandler directory.</li>
<li>Update <a href="https://github.com/n0mn0m/on-air/tree/main/sighandler/wrangler.toml">toml</a></li>
<li>Run wrangler preview</li>
<li>wrangler publish</li>
<li>Update <a href="https://github.com/n0mn0m/on-air/tree/main/sighandler/Makefile">Makefile</a> with your domain and test calling.</li>
</ol>
<p>PyPortal:</p>
<ol>
<li>Setup CircuitPython 5.x on the <a href="https://circuitpython.org/board/pyportal/">PyPortal</a>.</li>
<li>If you’re new to CircuitPython you
   should <a href="https://learn.adafruit.com/welcome-to-circuitpython/circuitpython-essentials">read</a> this first.</li>
<li>Go to the directory where you cloned on-air.</li>
<li>cd into display.</li>
<li>Update <a href="https://github.com/n0mn0m/on-air/tree/main/display/secrets.py">secrets.py`</a> with your wifi information and
   status URL endpoint.</li>
<li>Copy code.py, secrets.py and the bitmap files in screens/ to the root of the PyPortal.</li>
<li>The display is now good to go.</li>
</ol>
<p>ESP-EYE:</p>
<ol>
<li>Setup <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/">esp-idf</a> using the 4.1 release
   branch.</li>
<li>Install <a href="http://espeak.sourceforge.net/">espeak</a> and <a href="http://sox.sourceforge.net/">sox</a>.</li>
<li>Setup a Python 3.7 virtual environment and install Tensorflow 1.15.</li>
<li>cd into on-air/voice-assistant/train</li>
<li>chmod +x orchestrate.sh and ./orchestrate.sh</li>
<li>Once training completes cd ../smalltalk</li>
<li>Activate the esp-idf tooling so that $IDFPATH is set correctly and all requirements are met.</li>
<li>idf.py menuconfig and set your wifi settings.</li>
<li>Update the URL
   in <a href="https://github.com/n0mn0m/on-air/tree/main/voice-assistant/smalltalk/main/http/togglestatus.cc">toggle\status.cc</a></li>
<li>This should match the host and endpoint you deployed the Cloudflare worker to above</li>
<li>idf.py build</li>
<li>idf.py --port \&lt;device port&gt; flash monitor</li>
<li>You should see the device start, attach to WiFi and begin listening for the wake word “visual” followed by “on” or
    “off”.</li>
</ol>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-24 00:00:00+00:00">March 24, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-model-training"><a class="toclink" href="../../2020/03/24/train-all-the-things--model-training/">Train All the Things — Model Training</a></h2>
<p>Recently I spent some time learning how to generate synthetic voices
using <a href="https://burningdaylight.io/posts/train-all-the-things-data-generation/">espeak</a>. After working with the tools to
aligning with the Tensorflow keyword models expectations I was ready for training, and to see how well the synthetic
data performed. TLDR: not well :)</p>
<p>I started by training using the keywords hi, smalltalk and on. This let me have a known working word while testing two
synthetic words. Although training went well:</p>
<div class="highlight"><pre><span></span><code>INFO:tensorflow:Saving<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/Users/n0mn0m/projects/on-air/voice-assistant/train/model/speechcommandstrain/tinyconv.ckpt-18000&quot;</span><span class="w">  </span>
I0330<span class="w"> </span><span class="m">10</span>:34:28.514455<span class="w"> </span><span class="m">4629171648</span><span class="w"> </span>train.py:297<span class="o">]</span><span class="w"> </span>Saving<span class="w"> </span>to<span class="w"> </span><span class="s2">&quot;/Users/n0mn0m/projects/on-air/voice-assistant/train/model/speechcommandstrain/tinyconv.ckpt-18000&quot;</span><span class="w">  </span>
INFO:tensorflow:setsize<span class="o">=</span><span class="m">1445</span><span class="w">  </span>
I0330<span class="w"> </span><span class="m">10</span>:34:28.570324<span class="w"> </span><span class="m">4629171648</span><span class="w"> </span>train.py:301<span class="o">]</span><span class="w"> </span><span class="nv">setsize</span><span class="o">=</span><span class="m">1445</span><span class="w">  </span>
WARNING:tensorflow:Confusion<span class="w"> </span>Matrix:<span class="w">  </span>
<span class="w"> </span><span class="o">[[</span><span class="m">231</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">178</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">26</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">146</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">352</span><span class="w"> </span><span class="m">21</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">361</span><span class="o">]]</span><span class="w">  </span>
W0330<span class="w"> </span><span class="m">10</span>:34:32.116044<span class="w"> </span><span class="m">4629171648</span><span class="w"> </span>train.py:320<span class="o">]</span><span class="w"> </span>Confusion<span class="w"> </span>Matrix:<span class="w">  </span>
<span class="w"> </span><span class="o">[[</span><span class="m">231</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">4</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">178</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="m">29</span><span class="w"> </span><span class="m">26</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">12</span><span class="w"> </span><span class="m">146</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">2</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">17</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">352</span><span class="w"> </span><span class="m">21</span><span class="o">]</span><span class="w">  </span>
<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">361</span><span class="o">]]</span><span class="w">  </span>
WARNING:tensorflow:Final<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="nv">accuracy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">87</span>.8%<span class="w"> </span><span class="o">(</span><span class="nv">N</span><span class="o">=</span><span class="m">1445</span><span class="o">)</span><span class="w">  </span>
W0330<span class="w"> </span><span class="m">10</span>:34:32.116887<span class="w"> </span><span class="m">4629171648</span><span class="w"> </span>train.py:322<span class="o">]</span><span class="w"> </span>Final<span class="w"> </span><span class="nb">test</span><span class="w"> </span><span class="nv">accuracy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">87</span>.8%<span class="w"> </span><span class="o">(</span><span class="nv">N</span><span class="o">=</span><span class="m">1445</span><span class="o">)</span>The<span class="w"> </span>model<span class="w"> </span>didn’t<span class="w"> </span>respond<span class="w"> </span>well<span class="w"> </span>once<span class="w"> </span>it<span class="w"> </span>was<span class="w"> </span>loaded<span class="w"> </span>onto<span class="w"> </span>the<span class="w"> </span>ESP-EYE.<span class="w"> </span>I<span class="w"> </span>tried<span class="w"> </span>a<span class="w"> </span>couple<span class="w"> </span>more<span class="w"> </span>rounds<span class="w"> </span>with<span class="w"> </span>other<span class="w"> </span>keywords<span class="w"> </span>and<span class="w"> </span>spectrogram<span class="w"> </span>samples<span class="w"> </span>with<span class="w"> </span>similar<span class="w"> </span>results.
</code></pre></div>
<p>Because of the brute force nature that I used to generate audio the synthetic training data isn’t very representative of
real human voices. While the experiment didn’t work out, I do think that generating data this way could be useful with
the right amount of time and research. Instead of scaling parameters in a loop I think researching the characteristic of
various human voices and using those to tune the data generated via espeak could actually work out well. That said it’s
possible the model may pick up on characteristics of the espeak program too. Regardless, voice data that is ready for
training is still a hard problem in need of more open solutions.</p>
<p>Along with the way I scaled the espeak parameters another monkey wrench is that the microspeech model makes use of a CNN
and spectrogram of the input audio instead of full signal processing. This means it’s highly likely the model will work
with voices around the comparison spectrogram well, but not generalize. This makes picking the right spectrogram
relative to the user another key task.</p>
<p>Because of these results and bigger issues I ended up tweaking my approach and
used <a href="https://github.com/n0mn0m/on-air/tree/main/voice-assistant/smalltalk/main/main_functions.cc">visual</a> as my wake
word followed by on/off. All of these are available in the TF command words dataset, and visual seems like an ok wake
word when controlling a display. For somebody working on a generic voice assistant you will want to work on audio
segmentation since many datasets are sentences, or consider using something
like <a href="https://github.com/espressif/esp-skainet">Skainet</a>. All of this was less fun than running my own model from
synthtetic data, but I needed to continue forward. After a final round of training with all three words I followed the
TF <a href="https://www.tensorflow.org/lite/microcontrollers?hl=he">docs</a> to represent the model as a C array and then flashed
it onto the board with the rest of the program. Using idf monitor I was able to observe the model working as expected:</p>
<div class="highlight"><pre><span></span><code>I<span class="w"> </span><span class="o">(</span><span class="m">31</span><span class="o">)</span><span class="w"> </span>boot:<span class="w"> </span>ESP-IDF<span class="w"> </span>v4.1<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">31</span><span class="o">)</span><span class="w"> </span>boot:<span class="w"> </span>compile<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="m">13</span>:35:43<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">704</span><span class="o">)</span><span class="w"> </span>wifi:<span class="w"> </span>config<span class="w"> </span>NVS<span class="w"> </span>flash:<span class="w"> </span>enabled<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">734</span><span class="o">)</span><span class="w"> </span>WIFI<span class="w"> </span>STATION:<span class="w"> </span>Setting<span class="w"> </span>WiFi<span class="w"> </span>configuration<span class="w"> </span>SSID<span class="w"> </span>Hallow...<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">824</span><span class="o">)</span><span class="w"> </span>WIFI<span class="w"> </span>STATION:<span class="w"> </span>wifiinitsta<span class="w"> </span>finished.<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">1014</span><span class="o">)</span><span class="w"> </span>TFLITEAUDIOPROVIDER:<span class="w"> </span>Audio<span class="w"> </span>Recording<span class="w"> </span>started<span class="w">  </span>
Waking<span class="w"> </span>up<span class="w">  </span>
Recognized<span class="w"> </span>on<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">20434</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPS<span class="w"> </span><span class="nv">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="nv">contentlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">20434</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPEVENTDISCONNECTED<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">20444</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPEVENTDISCONNECTED<span class="w">  </span>
Going<span class="w"> </span>back<span class="w"> </span>to<span class="w"> </span>sleep.<span class="w">  </span>
Waking<span class="w"> </span>up<span class="w">  </span>
Recognized<span class="w"> </span>off<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">45624</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPS<span class="w"> </span><span class="nv">Status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">200</span>,<span class="w"> </span><span class="nv">contentlength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">45624</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPEVENTDISCONNECTED<span class="w">  </span>
I<span class="w"> </span><span class="o">(</span><span class="m">45634</span><span class="o">)</span><span class="w"> </span>HTTPSHANDLING:<span class="w"> </span>HTTPEVENTDISCONNECTEDThis<span class="w"> </span>was<span class="w"> </span>an<span class="w"> </span>educational<span class="w"> </span>experiment.<span class="w"> </span>It<span class="w"> </span>helped<span class="w"> </span>me<span class="w"> </span>put<span class="w"> </span>some<span class="w"> </span>new<span class="w"> </span>tools<span class="w"> </span><span class="k">in</span><span class="w"> </span>my<span class="w"> </span>belt<span class="w"> </span><span class="k">while</span><span class="w"> </span>thinking<span class="w"> </span>further<span class="w"> </span>about<span class="w"> </span>the<span class="w"> </span>problem<span class="w"> </span>of<span class="w"> </span>voice<span class="w"> </span>and<span class="w"> </span>audio<span class="w"> </span>processing.<span class="w"> </span>I<span class="w"> </span>developed<span class="w"> </span>some<span class="w"> </span><span class="o">[</span>scripts<span class="o">](</span>https://github.com/n0mn0m/on-air/tree/main/voice-assistant/train<span class="o">)</span><span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>through<span class="w"> </span>the<span class="w"> </span>full<span class="w"> </span>data<span class="w"> </span>generation,<span class="w"> </span>train<span class="w"> </span>and<span class="w"> </span><span class="nb">export</span><span class="w"> </span>cycle.<span class="w"> </span>Training<span class="w"> </span>will<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>be<span class="w"> </span><span class="k">done</span><span class="w"> </span>based<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>architecture<span class="w"> </span>somebody<span class="w"> </span>is<span class="w"> </span>using,<span class="w"> </span>but<span class="w"> </span>hopefully<span class="w"> </span>it’s<span class="w"> </span>useful.
</code></pre></div>
<p>The code, docs, images etc for the project can be found <a href="https://github.com/n0mn0m/on-air">here</a> and I’ll be posting
updates as I continue along to <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a> and this blog. If you have any
questions or ideas reach <a href="mailto:n0mn0m@burningdaylight.io">out</a>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-19 00:00:00+00:00">March 19, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-synthetic-generation"><a class="toclink" href="../../2020/03/19/train-all-the-things--synthetic-generation/">Train All the Things — Synthetic Generation</a></h2>
<p>After getting the display and worker up and running I started down the path of training my model for keyword
recognition. Right now I’ve settled on the wake words Hi Smalltalk. After the wake word is detected the model will then
detect silence, on, off, or unknown.</p>
<p>My starting point for training the model was
the <a href="https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/micro/examples/micro_speech">microspeech</a>
and <a href="https://github.com/tensorflow/docs/blob/master/site/en/r1/tutorials/sequences/audio_recognition">speechcommands</a>
tutorials that are part of the Tensorflow project. One of the first things I noticed while planning out this step was
the lack of good wake words in the speech command dataset. There
are <a href="https://github.com/jim-schwoebel/voice_datasets">many</a> voice datasets available online, but many are unlabeled or
conversational. Since digging didn't turn up much in the way of open labeled word datasets I decided to use on and off
from the speech commands <a href="https://ai.googleblog.com/2017/08/launching-speech-commands-dataset.html">dataset</a> since that
gave me a baseline for comparison with my custom words. After recording myself saying hi and smalltalk less then ten
times I knew I did not want to generate my own samples at the scale of the other labeled keywords.</p>
<p>Instead of giving up on my wake word combination I started digging around for options and found an
interesting <a href="https://github.com/JohannesBuchner/spoken-command-recognition">project</a> where somebody had started down the
path of generating labeled words with text to speech. After reading through the repo I ended up
using <a href="http://espeak.sourceforge.net/">espeak</a> and <a href="http://sox.sourceforge.net/">sox</a> to generate my labeled dataset.</p>
<p>The first step was to generate the <a href="https://en.wikipedia.org/wiki/Phoneme">phonemes</a> for the wake words:</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>espeak<span class="w"> </span>-v<span class="w"> </span>en<span class="w"> </span>-X<span class="w"> </span>smalltalk<span class="w">  </span>
</code></pre></div>
<p>then stored the phoneme in a word file that will be used by generate.sh.</p>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>cat<span class="w"> </span>words<span class="w">  </span>
hi<span class="w"> </span><span class="m">001</span><span class="w"> </span>
busy<span class="w"> </span><span class="m">002</span><span class="w"> </span>
free<span class="w"> </span><span class="m">003</span>
smalltalk<span class="w"> </span><span class="m">004</span>
</code></pre></div>
<p>After modifying generate.sh from the spoken command repo (eliminating some extra commands and extending the loop to
generating more samples) I had everything I needed to synthetically generate a new labeled word dataset.</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash  </span>
<span class="c1"># For the various loops the variable stored in the index variable  </span>
<span class="c1"># is used to attenuate the voices being created from espeak.*lastwordid=&quot;&quot;cat words | while read word wordid phonemedo  </span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$word</span><span class="w">  </span>
mkdir<span class="w"> </span>-p<span class="w"> </span>db/<span class="nv">$word</span><span class="w"> </span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$word</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="nv">$lastword</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w">  </span>
<span class="w"> </span><span class="nv">versionid</span><span class="o">=</span><span class="m">0</span><span class="w">  </span>
<span class="w"> </span><span class="k">fi</span><span class="w"> </span>

<span class="nv">lastword</span><span class="o">=</span><span class="nv">$word</span><span class="w"> </span>

<span class="c1"># Generate voices with various dialects  </span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>english<span class="w"> </span>english-north<span class="w"> </span>en-scottish<span class="w"> </span>englishrp<span class="w"> </span>englishwmids<span class="w"> </span>english-us<span class="w"> </span>en-westindies<span class="w">  </span>
<span class="k">do</span><span class="w">  </span>
<span class="w">    </span><span class="c1"># Loop changing the pitch in each iteration  </span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>k<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">99</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w">  </span>
<span class="w">        </span><span class="c1"># Change the speed of words per minute  </span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span>j<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">120</span><span class="w"> </span><span class="m">140</span><span class="w"> </span><span class="m">160</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w">  </span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$versionid</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$phoneme</span><span class="s2">&quot;</span><span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="nv">$j</span><span class="w"> </span><span class="nv">$k</span><span class="w">  </span>
<span class="w">            </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$phoneme</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>espeak<span class="w"> </span>-p<span class="w"> </span><span class="nv">$k</span><span class="w"> </span>-s<span class="w"> </span><span class="nv">$j</span><span class="w"> </span>-v<span class="w"> </span><span class="nv">$i</span><span class="w"> </span>-w<span class="w"> </span>db/<span class="nv">$word</span>/<span class="nv">$versionid</span>.wav<span class="w">  </span>
<span class="w">            </span><span class="c1"># Set sox options for Tensorflow  </span>
<span class="w">            </span>sox<span class="w"> </span>db/<span class="nv">$word</span>/<span class="nv">$versionid</span>.wav<span class="w"> </span>-b<span class="w"> </span><span class="m">16</span><span class="w"> </span>--endian<span class="w"> </span>little<span class="w"> </span>db/<span class="nv">$word</span>/tf<span class="nv">$versionid</span>.wav<span class="w"> </span>rate<span class="w"> </span>16k<span class="w">  </span>
<span class="w">            </span><span class="o">((</span>versionid++<span class="o">))</span><span class="w">  </span>
<span class="w">        </span><span class="k">done</span><span class="w">  </span>
<span class="w">     </span><span class="k">done</span><span class="w">  </span>
<span class="k">done</span>
</code></pre></div>
<p>After the run I have samples and labels with a volume comparable to the other words provided by Google. The pitch, speed
and tone of voice changes with each loop which will hopefully provide enough variety to make this dataset useful in
training. Even if this doesn’t work out learning about espeak and sox was interesting. I've already got some future
ideas on how to use those. If it does work the ability to generate training data on demand seems incredibly useful.</p>
<p>Next up, training the model and loading to the ESP-EYE. The code, docs, images etc for the project can be
found <a href="https://github.com/n0mn0m/on-air">here</a> and I’ll be posting updates as I continue along
to <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a> and this blog. If you have any questions or ideas
reach <a href="mailto:n0mn0m@burningdaylight.io">out</a>.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-03-05 00:00:00+00:00">March 5, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="train-all-the-things-display"><a class="toclink" href="../../2020/03/05/train-all-the-things--display/">Train All the Things — Display</a></h2>
<p>Continuing my project with things I know the PyPortal display was up next. Last year I spent a few weeks playing with
the portal to make a badge at Gen Con and had a lot of fun with it. Since that
time <a href="https://circuitpython.org/downloads">CircuitPython 5</a> has been released and the portal now expects a few
new <a href="https://circuitpython.org/libraries">modules</a> which were easy enough to download and send to the board. The
PyPortal makes it incredibly easy to point at an endpoint to fetch data:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">board</span>  
<span class="kn">from</span><span class="w"> </span><span class="nn">adafruit</span><span class="w"> </span><span class="kn">import</span> <span class="n">PyPortalpyportal</span>

<span class="n">pyportal</span> <span class="o">=</span> <span class="n">PyPortal</span><span class="p">(</span>  
 <span class="n">url</span><span class="o">=&lt;</span><span class="n">your</span> <span class="n">url</span> <span class="n">here</span><span class="o">&gt;</span><span class="p">,</span>  
 <span class="n">default</span><span class="o">=</span><span class="s2">&quot;green.bmp&quot;</span>  
<span class="p">)</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">pyportal</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>  
<span class="nb">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</code></pre></div>
<p>With that small snippet we have our status, and all we need to do is put that in a loop to set the background depending
on the bit returned.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">board</span>  
<span class="kn">from</span><span class="w"> </span><span class="nn">time</span><span class="w"> </span><span class="kn">import</span> <span class="n">sleep</span>  
<span class="kn">from</span><span class="w"> </span><span class="nn">adafruitpyportal</span><span class="w"> </span><span class="kn">import</span> <span class="n">PyPortaltry</span><span class="p">:</span>  
<span class="kn">from</span><span class="w"> </span><span class="nn">secrets</span><span class="w"> </span><span class="kn">import</span> <span class="n">secrets</span> <span class="o">*</span> <span class="c1"># noqa  </span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  
 <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WiFi secrets are kept in secrets.py, please add them there!&quot;</span><span class="p">)</span>  

<span class="n">raisepyportal</span> <span class="o">=</span> <span class="n">PyPortal</span><span class="p">(</span>  
 <span class="n">url</span><span class="o">=</span><span class="n">secrets</span><span class="p">[</span><span class="s2">&quot;signal&quot;</span><span class="p">],</span>  
 <span class="n">defaultbg</span><span class="o">=</span><span class="s2">&quot;green.bmp&quot;</span>  
<span class="p">)</span>

<span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  
 <span class="n">status</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pyportal</span><span class="o">.</span><span class="n">fetch</span><span class="p">())</span>  
 <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">status</span> <span class="o">==</span> <span class="n">current</span><span class="p">:</span>  
     <span class="k">pass</span>  
 <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">current</span><span class="p">:</span>  
     <span class="n">pyportal</span><span class="o">.</span><span class="n">setbackground</span><span class="p">(</span><span class="s2">&quot;green.bmp&quot;</span><span class="p">)</span>  
 <span class="n">current</span> <span class="o">=</span> <span class="mi">0</span>  
     <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">status</span> <span class="o">!=</span> <span class="n">current</span><span class="p">:</span>  
 <span class="n">pyportal</span><span class="o">.</span><span class="n">setbackground</span><span class="p">(</span><span class="s2">&quot;red.bmp&quot;</span><span class="p">)</span>  
     <span class="n">current</span> <span class="o">=</span> <span class="mi">1</span>  
 <span class="k">elif</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">status</span> <span class="o">==</span> <span class="n">current</span><span class="p">:</span>  
     <span class="k">pass</span>  
 <span class="n">sleep</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
</code></pre></div>
<p>Even though it’s a small snippet I want to point out a couple things. First I’m wrapping the return from fetch in a cast
to int. If you use Python, but you are new to CircuitPython this may seem odd. If you don't do this and try to compare a
string to an int you're probably not going to get the result you expect. Try it out in a repl and then follow up
with <a href="https://learn.adafruit.com/circuitpython-essentials/circuitpython-essentials">CircuitPython Essentials</a> . Also I'm
only changing the background if the status we fetch is different than the current status. While repainting the screen is
fast, it's noticeable and there's no reason to do it every 30 seconds if nothing is different.</p>
<p>That’s it. Now whenever the endpoint receives an update the portal will see that status change and update the display.</p>
<p><img alt="" src="../../../img/blog/03CX8xYl9jomuqB3y.jpg" /></p>
<p><img alt="" src="../../../img/blog/0-oqB9-pFVqxL1xWc.jpg" /></p>
<p>Thanks to Adafruit for publishing the <a href="https://www.thingiverse.com/search?q=pyportal&amp;dwh=915e616a3fbda6e">case</a> above.
The logo on display is the Jolly Wrencher of <a href="https://hackaday.com/about/">Hackaday</a>.</p>
<p>With the <a href="https://burningdaylight.io/posts/train-all-the-things-sighandler/">endpoint</a> and display done I’m off into the
unknown. I’ll be setting up the ESP-EYE to update the endpoint, training the voice model and finally running it all with
FreeRTOS.</p>
<p>The code, docs, images etc for the project can be found <a href="https://github.com/n0mn0m/on-air">here</a> and I’ll be posting
updates as I continue along to <a href="https://hackaday.io/project/170228-on-air">HackadayIO</a> and this blog. If you have any
questions or ideas reach <a href="mailto:n0mn0m@burningdaylight.io">out</a>.</p>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../../">1</a> <a class="md-pagination__link" href="../2/">2</a> <span class="md-pagination__current">3</span> <a class="md-pagination__link" href="../4/">4</a> <a class="md-pagination__link" href="../5/">5</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../7/">7</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="/feed_rss_updated.xml" target="_blank" rel="noopener" title="RSS Feed" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64m0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0m32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.path", "icons"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  </body>
</html>